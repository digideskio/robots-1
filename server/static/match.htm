{% extends 'base.htm' %}

{% block content %}
oh hello, welcome!
<a href="#" id="startmatch">Start match</a>
<div class="robotlist"></div>
<canvas id='field' width='500' height='500'></canvas>
{% endblock %}

{% block script %}
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function() {
            // this is written through template substitution on the server.
            var matchId = "{{ match_id }}";
            var authCode = courier.core.readCookie(matchId);
            var m = new courier.match.Match(matchId, courier.core.readCookie(matchId));
            courier.ui.WatchMatchRobots(m, $(".robotlist"));
            if (authCode) {
                $("#startmatch").click(
                    function() {
                        m.startMatch();
                        return false;
                    });
            } else {
                $("#startmatch").remove();
            }
            courier.drawing.renderField(m, $("#field"));
            m.populate(true);
        });
    </script>
{% endblock %}
